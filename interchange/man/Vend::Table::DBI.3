.\" Automatically generated by Pod::Man 2.28 (Pod::Simple 3.29)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{
.    if \nF \{
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\" ========================================================================
.\"
.IX Title "Vend::Table::DBI 3"
.TH Vend::Table::DBI 3 "2016-12-23" "perl v5.22.2" "User Contributed Perl Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
Vend::Table::DBI
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
use Vend::Table::Common;
use Vend::Table::DBI;
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
This is the database code that links Interchange to database tables as
presented by Perl \s-1DBI,\s0 and which are interfaced by \s-1SQL.\s0 Some may
conceivably be non-SQL tables with \s-1DBI\s0 frontents, but most Interchange
installations use MySQL or Postgres.
.SH "METHODS"
.IX Header "METHODS"
Selected methods used in this module are documented below.
.IP "set_field" 4
.IX Item "set_field"
This method sets a single field with a value, i.e.
.Sp
.Vb 1
\&        $dbobj\->set_field($key,$field,$value)
.Ve
.Sp
The primary key for the field is passed as the first parameter, the
field name as defined in the Interchange table definition is the
second parameter, and the value to be set is the last value.
.Sp
If the row does not exist, it will be created. (Note that this
may fail if there are \s-1NOT NULL\s0 values without defaults.)
.Sp
This will essentially perform this pseudo-query:
.Sp
.Vb 3
\&        UPDATE  $table
\&        SET     $field = $value
\&        WHERE   $primary_key = $key
.Ve
.Sp
If there is a database configuration \s-1TIMESTAMP_FIELD,\s0 and the column
is defined as \s-1NO_UPDATE,\s0 the \s-1TIMESTAMP_FIELD\s0 will be set to its
current value to avoid being marked as updated. This changes the
pseudo_query to be
.Sp
.Vb 3
\&        UPDATE  $table
\&        SET     $timestamp_field = $timestamp_field, $field = $value
\&        WHERE   $primary_key = $key
.Ve
.Sp
This is most commonly needed in Interchange's userdb definition,
where it sets the mod_time field and you may not wish to indicate
the user as having been updated.
.Sp
.Vb 2
\&        Database userdb TIMESTAMP_FIELD update_date
\&        Database userdb NO_UPDATE mod_time
.Ve
.Sp
\&\s-1WARNING:\s0 There is no update_date field in Interchange's table definition
in the demo. You would need to add that to make this work.
